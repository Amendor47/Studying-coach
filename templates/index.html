<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study Coach ‚Äî Ultimate Learning Solution</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#00e0b8" />
  
  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='advanced-flashcards.css') }}" />
  
  <!-- PWA Support -->
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  
  <!-- Performance optimizations -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preload" href="{{ url_for('static', filename='advanced-flashcards.js') }}" as="script">
</head>
<body>
  <!-- Background elements -->
  <div class="bg-grid"></div>
  <div class="flashcard-progress"></div>

  <!-- HEADER -->
  <header class="topbar">
    <div class="brand">
      <svg class="logo" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <rect x="3" y="6" width="18" height="12" rx="6" stroke="currentColor" stroke-width="1.8"/>
        <circle cx="12" cy="12" r="3" fill="currentColor"/>
      </svg>
      <span class="title">Study&nbsp;Coach</span>
    </div>

    <nav class="tabs" role="tablist">
      <button class="tab active" data-tab="import" role="tab">Importer</button>
      <button class="tab" data-tab="courses" role="tab">Cours</button>
      <button class="tab" data-tab="flash" role="tab">R√©visions</button>
      <button class="tab" data-tab="exercises" role="tab">Exercices</button>
      <button class="tab" data-tab="web" role="tab">Web</button>
      <button class="tab" data-tab="settings" role="tab">Param√®tres</button>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="wrapper hero-inner">
      <h1 class="h1">Designed for focus</h1>
      <p class="sub">Un coach d‚Äô√©tude priv√©, rapide et lisible. Minimal, noir & blanc, avec juste ce qu‚Äôil faut d‚Äôaccent.</p>
      <div class="cta-row">
        <a class="btn btn-primary" href="#import">Commencer</a>
        <a class="btn btn-ghost" href="#web">Enrichir via Web</a>
      </div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="wrapper stack">
    <!-- IMPORT -->
    <section id="import" class="panel active" role="tabpanel">
      <div class="panel-head">
        <h2>Importer un cours</h2>
        <p class="muted">PDF, DOCX, TXT ou Markdown. Analyse hors-IA fiable, IA optionnelle.</p>
      </div>

      <div class="card-grid">
        <div class="card">
          <label class="file">
            <input type="file" id="file-input" accept=".txt,.md,.pdf,.docx" />
            <span>Glisser-d√©poser ou cliquer pour choisir un fichier</span>
          </label>

          <div class="row">
            <select id="session-minutes" class="select">
              <option value="25">25 min</option>
              <option value="45">45 min</option>
              <option value="60">1 h</option>
              <option value="120">2 h</option>
              <option value="180">3 h</option>
            </select>
            <label class="check"><input type="checkbox" id="use-ai-upload" /> <span>Am√©liorer via IA</span></label>
          </div>

          <div class="row gap">
            <button id="upload-btn" class="btn btn-primary">Analyser le fichier</button>
            <button id="analyze-btn" class="btn">Analyser le texte</button>
            <button id="ai-btn" class="btn btn-ghost" disabled>Am√©liorer via IA</button>
          </div>
        </div>

        <div class="card">
          <textarea id="source-text" placeholder="Colle ici le contenu de ton cours‚Ä¶"></textarea>
        </div>
      </div>

      <!-- brouillons en colonnes -->
      <div id="drafts" class="grid-cols"></div>
    </section>

    <!-- COURS -->
    <section id="courses" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Cours & fiches</h2>
        <p class="muted">Navigation par th√®mes. Les cartes s‚Äôaffichent en colonnes lisibles.</p>
      </div>
      <div id="themes" class="chips"></div>
      <div id="course-cards" class="grid-cols"></div>
    </section>

    <!-- R√âVISIONS AVANC√âES -->
    <section id="flash" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>R√©visions Intelligentes</h2>
        <p class="muted">Syst√®me avanc√© avec animations 60fps, reconnaissance gestuelle, et algorithmes d'espacement optimal.</p>
        <div class="revision-stats">
          <div class="stat-card">
            <div class="stat-value" id="due-count">0</div>
            <div class="stat-label">Cartes dues</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="accuracy-rate">0%</div>
            <div class="stat-label">Pr√©cision</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="streak-count">0</div>
            <div class="stat-label">S√©rie actuelle</div>
          </div>
        </div>
      </div>
      
      <!-- Advanced Flashcard Container -->
      <div id="flashcard-container" class="flashcard-main-container">
        <div class="flashcard-placeholder">
          <div class="placeholder-icon">üß†</div>
          <div class="placeholder-text">Chargement des cartes intelligentes...</div>
        </div>
      </div>
      
      <!-- Session Controls -->
      <div class="session-controls">
        <button class="btn btn-secondary" id="pause-session">
          ‚è∏Ô∏è Pause
        </button>
        <div class="session-timer" id="session-timer">00:00</div>
        <button class="btn btn-accent" id="settings-btn">
          ‚öôÔ∏è Param√®tres
        </button>
      </div>
      
      <!-- Keyboard shortcuts help -->
      <div class="keyboard-shortcuts" id="keyboard-help" style="display: none;">
        <h4>Raccourcis clavier</h4>
        <div class="shortcut-grid">
          <div class="shortcut-item">
            <kbd>Espace</kbd> <span>Retourner la carte</span>
          </div>
          <div class="shortcut-item">
            <kbd>1</kbd> <span>Encore (Difficile)</span>
          </div>
          <div class="shortcut-item">
            <kbd>2</kbd> <span>Difficile</span>
          </div>
          <div class="shortcut-item">
            <kbd>3</kbd> <span>Bien</span>
          </div>
          <div class="shortcut-item">
            <kbd>4</kbd> <span>Facile</span>
          </div>
        </div>
      </div>
    </section>

    <!-- EXERCICES -->
    <section id="exercises" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Exercices QCM</h2>
        <p class="muted">Vraies questions, 4 options, correction instantan√©e.</p>
      </div>
      <div id="exercise-list" class="grid-cols"></div>
    </section>

    <!-- WEB -->
    <section id="web" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Recherche web</h2>
        <p class="muted">Ajoute des sources fiables et transforme-les en fiches.</p>
      </div>
      <div class="card">
        <div class="row">
          <input id="web-q" class="input" placeholder="Ex : Photosynth√®se r√©sum√© fiable" />
          <label class="check"><input type="checkbox" id="web-ai" /> <span>Enrichir via IA</span></label>
          <button id="web-search" class="btn btn-primary">Rechercher</button>
        </div>
        <div id="web-results" class="stack-sm"></div>
      </div>
    </section>

    <!-- PARAM√àTRES -->
    <section id="settings" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Param√®tres</h2>
        <p class="muted">Profil IA, th√®me, taille du texte, etc.</p>
      </div>
      <div class="card">
        <p>Interface pr√™te. Branche tes options ici si besoin.</p>
      </div>
    </section>
  </main>

  <!-- TIMER -->
  <div id="timer" class="timer" aria-live="polite" title="Pomodoro">25:00</div>

  <!-- MODAL API KEY -->
  <div id="key-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content card">
      <h3>Cl√© API OpenAI</h3>
      <p class="muted">Stock√©e localement. Utilis√©e uniquement si tu actives l‚ÄôIA cloud.</p>
      <input type="password" id="key-input" class="input" placeholder="sk-..." />
      <div class="row end">
        <button id="save-key" class="btn btn-primary">Enregistrer</button>
      </div>
    </div>
  </div>

  <!-- Advanced Features Settings Modal -->
  <div id="advanced-settings-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content card">
      <h3>Param√®tres Avanc√©s</h3>
      
      <div class="settings-section">
        <h4>Animations et Interface</h4>
        <label class="check">
          <input type="checkbox" id="enable-animations" checked /> 
          <span>Animations hardware-accelerated</span>
        </label>
        <label class="check">
          <input type="checkbox" id="enable-gestures" checked /> 
          <span>Reconnaissance gestuelle (mobile)</span>
        </label>
        <label class="check">
          <input type="checkbox" id="enable-haptics" checked /> 
          <span>Retour haptique</span>
        </label>
      </div>
      
      <div class="settings-section">
        <h4>Apprentissage Intelligent</h4>
        <div class="setting-row">
          <label>M√©thode p√©dagogique pr√©f√©r√©e:</label>
          <select id="tutoring-method" class="input">
            <option value="adaptive">Adaptatif (recommand√©)</option>
            <option value="socratic">M√©thode Socratique</option>
            <option value="scaffolding">√âchafaudage p√©dagogique</option>
            <option value="active_recall">Rappel actif</option>
            <option value="elaborative">Apprentissage √©laboratif</option>
          </select>
        </div>
        <div class="setting-row">
          <label>Dur√©e de session optimale:</label>
          <input type="range" id="session-length" min="5" max="60" value="25" class="slider">
          <span id="session-length-value">25 minutes</span>
        </div>
      </div>
      
      <div class="settings-section">
        <h4>Analyse documentaire</h4>
        <label class="check">
          <input type="checkbox" id="enable-advanced-analysis" checked /> 
          <span>Analyse documentaire avanc√©e (OCR, formules math√©matiques)</span>
        </label>
        <label class="check">
          <input type="checkbox" id="enable-multimodal" checked /> 
          <span>Contenu multi-modal (images, audio)</span>
        </label>
      </div>
      
      <div class="row end">
        <button id="reset-settings" class="btn btn-ghost">R√©initialiser</button>
        <button id="save-advanced-settings" class="btn btn-primary">Sauvegarder</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='advanced-flashcards.js') }}"></script>
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
