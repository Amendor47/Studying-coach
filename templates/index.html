<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coach de Révision</title>
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
    <header class="topbar">
        <h1>Coach de Révision</h1>
        <nav class="tabs" role="tablist">
            <button class="tab active" data-tab="import" role="tab">Importer</button>
            <button class="tab" data-tab="courses" role="tab">Fiches de cours</button>
            <button class="tab" data-tab="flash" role="tab">Flashcards</button>
            <button class="tab" data-tab="exercises" role="tab">Exercices</button>
        </nav>
    </header>

    <main class="wrapper">
        <section id="import" class="panel active" role="tabpanel">
            <input type="file" id="file-input" accept=".txt,.md,.pdf,.docx" />
            <select id="session-minutes">
                <option value="10">10 min</option>
                <option value="25">25 min</option>
                <option value="45">45 min</option>
                <option value="60">1 h</option>
                <option value="120">2 h</option>
                <option value="180">3 h</option>
            </select>
            <label><input type="checkbox" id="use-ai-upload" /> IA</label>
            <button id="upload-btn">Envoyer</button>

            <textarea id="source-text" placeholder="Colle ton texte ici..."></textarea>
            <button id="analyze-btn">Analyser</button>
            <button id="ai-btn" disabled>Améliorer via IA</button>

            <div id="drafts"></div>

            <div style="margin-top:.5rem">
                <input id="web-q" placeholder="Rechercher sur le web (ex: Photosynthèse résumé)" />
                <button id="web-search">Rechercher Web</button>
                <label style="margin-left:.5rem"><input type="checkbox" id="web-ai" /> Enrichir via IA</label>
            </div>
            <div id="web-results"></div>
        </section>
        <section id="courses" class="panel" role="tabpanel">
            <div id="themes"></div>
            <div id="course-cards"></div>
        </section>
        <section id="flash" class="panel" role="tabpanel">
            <div id="due-cards"></div>
        </section>
        <section id="exercises" class="panel" role="tabpanel">
            <div id="exercise-list" aria-live="polite"></div>
        </section>
    </main>

    <!-- Timer avec contrôles -->
    <div class="timer" aria-live="polite">
        <div id="timer-label">Travail</div>
        <div id="timer">25:00</div>
        <div style="display:flex; gap:.5rem; margin-top:.5rem;">
            <button id="timer-start">Start</button>
            <button id="timer-pause">Pause</button>
            <button id="timer-resume">Reprendre</button>
            <button id="timer-reset">Reset</button>
        </div>
    </div>

    <!-- API Key modal -->
    <div id="key-modal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-content">
            <h2>Clé API OpenAI</h2>
            <p>Cette clé reste locale et n'est utilisée que si vous demandez l'IA.</p>
            <input type="password" id="key-input" placeholder="sk-..." />
            <button id="save-key">Enregistrer</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
