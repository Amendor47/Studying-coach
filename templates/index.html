<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study Coach — Focus</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  <!-- subtle grid background -->
  <div class="bg-grid"></div>

  <!-- HEADER -->
  <header class="topbar">
    <div class="brand">
      <svg class="logo" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <rect x="3" y="6" width="18" height="12" rx="6" stroke="currentColor" stroke-width="1.8"/>
        <circle cx="12" cy="12" r="3" fill="currentColor"/>
      </svg>
      <span class="title">Study&nbsp;Coach</span>
    </div>

    <nav class="tabs" role="tablist">
      <button class="tab active" data-tab="import" role="tab">Importer</button>
      <button class="tab" data-tab="courses" role="tab">Cours</button>
      <button class="tab" data-tab="flash" role="tab">Révisions</button>
      <button class="tab" data-tab="exercises" role="tab">Exercices</button>
      <button class="tab" data-tab="web" role="tab">Web</button>
      <button class="tab" data-tab="settings" role="tab">Paramètres</button>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="wrapper hero-inner">
      <h1 class="h1">Designed for focus</h1>
      <p class="sub">Un coach d’étude privé, rapide et lisible. Minimal, noir & blanc, avec juste ce qu’il faut d’accent.</p>
      <div class="cta-row">
        <a class="btn btn-primary" href="#import">Commencer</a>
        <a class="btn btn-ghost" href="#web">Enrichir via Web</a>
      </div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="wrapper stack">
    <!-- IMPORT -->
    <section id="import" class="panel active" role="tabpanel">
      <div class="panel-head">
        <h2>Importer un cours</h2>
        <p class="muted">PDF, DOCX, TXT ou Markdown. Analyse hors-IA fiable, IA optionnelle.</p>
      </div>

      <div class="card-grid">
        <div class="card">
          <label class="file">
            <input type="file" id="file-input" accept=".txt,.md,.pdf,.docx" />
            <span>Glisser-déposer ou cliquer pour choisir un fichier</span>
          </label>

          <div class="row">
            <select id="session-minutes" class="select">
              <option value="25">25 min</option>
              <option value="45">45 min</option>
              <option value="60">1 h</option>
              <option value="120">2 h</option>
              <option value="180">3 h</option>
            </select>
            <label class="check"><input type="checkbox" id="use-ai-upload" /> <span>Améliorer via IA</span></label>
          </div>

          <div class="row gap">
            <button id="upload-btn" class="btn btn-primary">Analyser le fichier</button>
            <button id="analyze-btn" class="btn">Analyser le texte</button>
            <button id="ai-btn" class="btn btn-ghost" disabled>Améliorer via IA</button>
          </div>
        </div>

        <div class="card">
          <textarea id="source-text" placeholder="Colle ici le contenu de ton cours…"></textarea>
        </div>
      </div>

      <!-- brouillons en colonnes -->
      <div id="drafts" class="grid-cols"></div>
    </section>

    <!-- COURS -->
    <section id="courses" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Cours & fiches</h2>
        <p class="muted">Navigation par thèmes. Les cartes s’affichent en colonnes lisibles.</p>
      </div>
      <div id="themes" class="chips"></div>
      <div id="course-cards" class="grid-cols"></div>
    </section>

    <!-- RÉVISIONS -->
    <section id="flash" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Révisions (type Anki/Quizlet)</h2>
        <p class="muted">Flip cartes, scoring SM-2, progression claire.</p>
      </div>
      <div id="due-cards" class="grid-cols"></div>
    </section>

    <!-- EXERCICES -->
    <section id="exercises" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Exercices QCM</h2>
        <p class="muted">Vraies questions, 4 options, correction instantanée.</p>
      </div>
      <div id="exercise-list" class="grid-cols"></div>
    </section>

    <!-- WEB -->
    <section id="web" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Recherche web</h2>
        <p class="muted">Ajoute des sources fiables et transforme-les en fiches.</p>
      </div>
      <div class="card">
        <div class="row">
          <input id="web-q" class="input" placeholder="Ex : Photosynthèse résumé fiable" />
          <label class="check"><input type="checkbox" id="web-ai" /> <span>Enrichir via IA</span></label>
          <button id="web-search" class="btn btn-primary">Rechercher</button>
        </div>
        <div id="web-results" class="stack-sm"></div>
      </div>
    </section>

    <!-- PARAMÈTRES -->
    <section id="settings" class="panel" role="tabpanel">
      <div class="panel-head">
        <h2>Paramètres</h2>
        <p class="muted">Profil IA, thème, taille du texte, etc.</p>
      </div>
      <div class="card">
        <p>Interface prête. Branche tes options ici si besoin.</p>
        
        <!-- Chat Assistant -->
        <div class="stack-sm">
          <h3>Assistant IA</h3>
          <div id="chat-log" class="chat-log"></div>
          <div class="row">
            <input id="chat-input" class="input" placeholder="Posez une question..." />
            <button id="chat-send" class="btn btn-primary">Envoyer</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- TIMER -->
  <div id="timer" class="timer" aria-live="polite" title="Pomodoro">
    <span id="timer-label">25:00</span>
    <div class="timer-controls">
      <button id="timer-start" class="btn-timer" title="Start">▶</button>
      <button id="timer-pause" class="btn-timer hidden" title="Pause">⏸</button>
      <button id="timer-resume" class="btn-timer hidden" title="Resume">▶</button>
      <button id="timer-reset" class="btn-timer" title="Reset">⏹</button>
    </div>
  </div>

  <!-- MODAL API KEY -->
  <div id="key-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content card">
      <h3>Clé API OpenAI</h3>
      <p class="muted">Stockée localement. Utilisée uniquement si tu actives l’IA cloud.</p>
      <input type="password" id="key-input" class="input" placeholder="sk-..." />
      <div class="row end">
        <button id="save-key" class="btn btn-primary">Enregistrer</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
